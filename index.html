<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ABD√úLKADƒ∞R‚Äôƒ∞ TOKATLAMA OYUNU</title>

<style>
body{
  margin:0;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:white;
  font-family:Arial,sans-serif;
  text-align:center;
  overflow:hidden;
}
h1{margin:10px 0}

#canBar{
  width:80%;height:16px;background:#444;
  margin:auto;border-radius:10px;overflow:hidden;
}
#can{width:100%;height:100%;background:limegreen}

#info{margin:8px 0;font-size:16px}

#oyun{position:relative;width:100%;height:70vh}

#oyuncuFoto{
  position:absolute;
  top:50%;left:50%;
  transform:translate(-50%,-50%);
  width:300px;
  border-radius:20px;
}

/* SHAKE */
.shake{animation:shake .15s}
@keyframes shake{
  0%{transform:translate(-50%,-50%)}
  25%{transform:translate(-47%,-50%) rotate(1deg)}
  50%{transform:translate(-53%,-50%) rotate(-1deg)}
  75%{transform:translate(-47%,-50%) rotate(1deg)}
  100%{transform:translate(-50%,-50%)}
}

/* EL & YUMRUK */
.efekt{position:absolute;font-size:90px;opacity:0}
#elSag{right:6%;top:50%;transform:translateY(-50%)}
#elSol{left:6%;top:50%;transform:translateY(-50%) scaleX(-1)}
#yumruk{left:50%;top:12%;transform:translateX(-50%)}

/* HAVAƒ∞ Fƒ∞≈ûEK */
.firework{
  position:fixed;
  font-size:30px;
  animation:fw 1.2s forwards;
}
@keyframes fw{
  0%{transform:scale(0);opacity:1}
  100%{transform:scale(3);opacity:0}
}
</style>
</head>

<body>

<h1>ABD√úLKADƒ∞R‚Äôƒ∞ TOKATLAMA OYUNU</h1>

<div id="canBar"><div id="can"></div></div>

<div id="info">
Tokat: <span id="tokat">0</span><br>
Rekor: <span id="rekor">0</span>
</div>

<div id="oyun">
  <img id="oyuncuFoto" src="abdulkadir.png">
  <div id="elSag" class="efekt">üëã</div>
  <div id="elSol" class="efekt">üëã</div>
  <div id="yumruk" class="efekt">üëä</div>
</div>

<script>
/* === AYARLAR === */
let maxCan = 10000;
let hasar = 20;

/* === OYUN DURUMU === */
let can = maxCan;
let tokat = 0; // ‚ùó SADECE OYUNDA ‚Äì √áIKI≈ûTA SIFIRLANIR

let rekor = localStorage.getItem("rekor")
  ? parseInt(localStorage.getItem("rekor"))
  : 0;

/* === DOM === */
const tokatYazi = document.getElementById("tokat");
const rekorYazi = document.getElementById("rekor");
const canBar = document.getElementById("can");
const foto = document.getElementById("oyuncuFoto");

tokatYazi.innerText = tokat;
rekorYazi.innerText = rekor;

/* === SES === */
const audioCtx = new (window.AudioContext||window.webkitAudioContext)();
function tokatSesi(){
  const b=audioCtx.createBuffer(1,audioCtx.sampleRate*0.1,audioCtx.sampleRate);
  const d=b.getChannelData(0);
  for(let i=0;i<d.length;i++) d[i]=(Math.random()*2-1)*(1-i/d.length);
  const s=audioCtx.createBufferSource();
  s.buffer=b;
  s.connect(audioCtx.destination);
  s.start();
}

/* === HAVAƒ∞ Fƒ∞≈ûEK === */
function fireworks(){
  for(let i=0;i<15;i++){
    const f=document.createElement("div");
    f.className="firework";
    f.innerText=["üéÜ","üéá","‚ú®"][Math.floor(Math.random()*3)];
    f.style.left=Math.random()*100+"vw";
    f.style.top=Math.random()*100+"vh";
    document.body.appendChild(f);
    setTimeout(()=>f.remove(),1200);
  }
}

/* === TOKAT === */
function vur(){
  tokat++;
  can -= hasar;

  foto.classList.add("shake");
  setTimeout(()=>foto.classList.remove("shake"),150);

  tokatSesi();
  if(navigator.vibrate) navigator.vibrate(30);

  if(tokat > rekor){
    rekor = tokat;
    localStorage.setItem("rekor", rekor);
    rekorYazi.innerText = rekor;
    fireworks();
  }

  if(can <= 0){
    can = maxCan; // ‚ùó TOKAT SIFIRLANMAZ
    alert("CAN Bƒ∞TTƒ∞ ‚Äì DEVAM üëä");
  }

  tokatYazi.innerText = tokat;
  canBar.style.width=(can/maxCan*100)+"%";
}

/* === TIKLAMA === */
document.addEventListener("click",vur);
</script>

</body>
</html>
