<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ABD√úLKADƒ∞R'ƒ∞ TOKATLAMA OYUNU</title>

<style>
body{
  margin:0;
  background:#000;
  color:white;
  font-family:Arial,sans-serif;
  text-align:center;
  overflow:hidden;
}

#startScreen, #game{
  position:absolute;
  width:100%;
  height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
}

.hidden{display:none;}

button{
  padding:12px 25px;
  font-size:18px;
  border:none;
  border-radius:10px;
  cursor:pointer;
}

#bar{
  width:80%;
  height:20px;
  background:#333;
  border-radius:10px;
  overflow:hidden;
  margin:10px auto;
}
#hp{
  height:100%;
  width:100%;
  background:lime;
}

#character{
  font-size:100px;
  cursor:pointer;
  user-select:none;
}

.emoji{
  position:absolute;
  font-size:40px;
  animation:fly 0.7s forwards;
}
@keyframes fly{
  to{opacity:0; transform:translateY(-60px);}
}

.firework{
  position:absolute;
  font-size:40px;
  animation:boom 1s forwards;
}
@keyframes boom{
  to{opacity:0; transform:scale(2);}
}
</style>
</head>

<body>

<div id="startScreen">
  <h1>ABD√úLKADƒ∞R'ƒ∞ TOKATLAMA OYUNU</h1>
  <input id="name" placeholder="ƒ∞smin" style="padding:10px;font-size:16px;">
  <br><br>
  <button onclick="start()">Oyna</button>
</div>

<div id="game" class="hidden">
  <div id="bar"><div id="hp"></div></div>
  <div>Tokat: <span id="hit">0</span> | Rekor: <span id="record">0</span></div>
  <div>Can: <span id="canText">10000</span></div>
  <div id="character">üßç‚Äç‚ôÇÔ∏è</div>
</div>

<script>
let maxCan = 10000;
let can = maxCan;
let hit = 0;
let record = localStorage.getItem("record") || 0;
let fireShown = false;
let damage = 20;

record = Number(record);
document.getElementById("record").innerText = record;

function start(){
  const name = document.getElementById("name").value.toLowerCase();
  if(name === "admin") damage = 2000;

  document.getElementById("startScreen").classList.add("hidden");
  document.getElementById("game").classList.remove("hidden");
}

const char = document.getElementById("character");

char.addEventListener("click", e=>{
  vur(e.clientX, e.clientY);
});

document.addEventListener("contextmenu", e=>{
  e.preventDefault();
  vur(e.clientX, e.clientY, true);
});

document.addEventListener("keydown", e=>{
  if(e.key==="ArrowUp"||e.key==="ArrowDown"){
    emoji("üëä", window.innerWidth/2, window.innerHeight/2);
    vur(window.innerWidth/2, window.innerHeight/2);
  }
});

function vur(x,y,right=false){
  if(navigator.vibrate) navigator.vibrate(50);

  hit++;
  can -= damage;

  document.getElementById("hit").innerText = hit;
  document.getElementById("canText").innerText = can;

  document.getElementById("hp").style.width =
    Math.max((can/maxCan)*100,0)+"%";

  emoji(right?"‚úã":"ü§ö", x, y);

  if(hit > record){
    record = hit;
    localStorage.setItem("record", record);
    document.getElementById("record").innerText = record;

    if(!fireShown){
      fireworks();
      fireShown = true;
    }
  }

  if(can <= 0){
    can = maxCan;
    document.getElementById("canText").innerText = can;
    document.getElementById("hp").style.width="100%";
  }
}

function emoji(t,x,y){
  const e=document.createElement("div");
  e.className="emoji";
  e.innerText=t;
  e.style.left=x+"px";
  e.style.top=y+"px";
  document.body.appendChild(e);
  setTimeout(()=>e.remove(),700);
}

function fireworks(){
  for(let i=0;i<15;i++){
    const f=document.createElement("div");
    f.className="firework";
    f.innerText="üéÜ";
    f.style.left=Math.random()*window.innerWidth+"px";
    f.style.top=Math.random()*window.innerHeight+"px";
    document.body.appendChild(f);
    setTimeout(()=>f.remove(),1000);
  }
}
</script>

</body>
</html>
